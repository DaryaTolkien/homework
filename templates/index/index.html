{% include 'header.html' %}

<div class="content">
<span style="margin: 30px;">BOOKS CATALOG</span>
	<select class="select_auhtor" onchange=f(this.value)>
{% for auhtors in content_data.get_auhtor %}
    <option value="{{ auhtors.id_auhtor }}" class="option_auhtor"> {{ auhtors.surname }} </option>
{% endfor %}
    </select>
	
<div id='x'></div>
	
<div class="catalog">
{% for catalog in catalogs %}
	
            <div class="product">
				
                <a href="/catalog/?id={{ catalog.id }}" class="menu-link">
				  <div class="book-title" id="name">{{ catalog.title }}</div>
				  <img src="/images/{{ catalog.image }}" class="catalog-image" id="img">
			 <div class="price-book" id="price">{{ catalog.price }} &#8381;</div>
				</a>
		
				<form action="/basket/"  method='post'>
				<input type="submit" value="add" class="buy-button" name="getgood">
				<input type="hidden" name="id" value="{{ catalog.id }}">
				</form>
            </div>
{% endfor %}
</div>
</div>
{% include 'footer.html' %}
 
<script type="text/javascript" src="/js/jquery.js"></script>
<script>
function f(id_auhtor){
	$.ajax({
		type: "GET",
		url: "/",
		data: {id_auhtor},
		dataType: 'json', 
		error: function (req, text, error) { // отслеживание ошибок во время выполнения ajax-запроса
            alert('Хьюстон, У нас проблемы! ' + text + ' | ' + error);
        },
	    success: function (response) {
			$("#x").html(response);
			//var obj = jQuery.parseJSON(response);
			
          //$('#x').attr('value', result.id_product);
	}
	});
   }
</script>












